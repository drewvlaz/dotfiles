#! /bin/bash

lines() {
    cat $1 | wc -l
}

se() {
    du -a \
    ~/.config/alacritty \
    ~/.config/bspwm \
    ~/.config/lvim \
    ~/.config/nvim \
    ~/.config/nvim_bkup \
    ~/.config/polybar \
    ~/.config/rofi \
    ~/.config/sxhkd \
    ~/.config/sxiv \
    ~/.config/tmux \
    ~/.config/zsh \
    ~/.scripts \
    --exclude='.git' |
    awk '{print $2}' |
    fzf |
    xargs -r $EDITOR ;
}

sd() {
    dir=$(
        du -d 8 \
        ~/Documents/ZeD/repos \
        ~/Documents/ZeD/agitation_study \
        ~/Documents/ZeD/anomaly_examples \
        ~/Documents/College \
        ~/Dev/dotfiles \
        ~/.config/alacritty \
        ~/.config/bspwm \
        ~/.config/lvim \
        ~/.config/nvim \
        ~/.config/nvim_bkup \
        ~/.config/polybar \
        ~/.config/rofi \
        ~/.config/sxhkd \
        ~/.config/sxiv \
        ~/.config/tmux \
        ~/.config/zsh \
        ~/.scripts \
        --exclude='.git' \
        --exclude='.github' \
        --exclude='.vim' \
        --exclude='.vscode' \
        --exclude='data' \
        --exclude='boost' \
        --exclude='venv' \
        --exclude='py39' \
        --exclude='__pycache__' \
        --exclude='data_smashing_' \
        --exclude='cynet_' \
        --exclude='*temp' |
        awk '{print $2}' |
        fzf
    )
    retVal=$?

    if [ $retVal -eq 0 ]; then
        cd $dir
    fi
}

sdls() {
    sd
    if [ $retVal -eq 0 ]; then
        ls
    fi
}

tat() {
    session=$(tmux ls | cut -d: -f1 | fzf --select-1 --exit-0)
    retVal=$?
    if [ $retVal -eq 0 ]; then
        tmux attach -t $session
    fi
}

tkill() {
    session=$(tmux ls | cut -d: -f1 | fzf --exit-0)
    retVal=$?
    if [ $retVal -eq 0 ]; then
        tmux kill-session -t $session
    fi
}

randp() {
    if [ -n "$1" ]; then
        dir=$1
    fi
    du -a $1 | 
    grep -i -E '\.(png|jpg|jpeg|gif)$' |
    shuf -n 1000 | 
    sed 's/\ |\(|\)/\\\ /g' | # Put a "\" before spaces
    awk '{for (i=2; i<NF; i++) printf $i " "; print $NF}' | # Remove leading numbers
    sxiv -i -t
}

pkgsizes() {
    pacman -Qei | 
    gawk '/^Name/ { x = $3 }; /^Installed Size/ { sub(/Installed Size  *:/, ""); print x":" $0 }' |
    grep MiB |
    sort -k2,3nr |
    less
}

# texclean() {
#     du -a | 
#     awk '{print $2}' | 
#     grep -E '(\.|\_)(aux|fdb|fls|log|synctex|minted)' | 
#     sed 's/.\///g' | 
#     xargs rm -rf
# }
